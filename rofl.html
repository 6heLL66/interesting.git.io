<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<style>
	*{
		margin:5;
	}
	body{
		display: flex;
		flex-direction: column;
		align-items: center;
	}
	.field{
		width: 100%;
		height: 700px;
		border:2px solid black;
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
	}
	.element{
		width: 20px;
		height: 20px;
		position: relative;
		font-size: 28px;
		color: black;
		text-align: center;
		line-height: 30px;
		

	}
	.control{
		display: flex;
		flex-direction: row;
		justify-content: space-around;
		align-items: center;
		width: 40%;
		height: 50px;
		border:2px solid black;
		margin-top: 10PX;
	}
	.button{
		width: 20%;
		background-color:black;
		color: white;
		font-size: 24px;
		text-align: center;
		cursor: pointer;

	}
	.data{
		display: flex;
		width: 20%;
		height:80px;
		justify-content: space-between;
		align-items: center;
		font-size: 42px;
		font-family: Arial;
	}
	.number{
		display: flex;
		flex-direction: row;
		justify-content: center;
		align-items:center;
	}
	.q{
		display: flex;
		position: absolute;
		top: 0;
		left: 0;
	}
	.g{
		position: fixed;
		font-size: 35px;
		left: 20px;
		top: 20px;
	}
	.text{
		color: red;
		font-size: 80px;
		font-family: Arial;
	}
	.win{
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		background: rgba(0,0,0,0.85);
		display: none;
	}
	.restart{
		border:2px solid white;
		padding: 5px 30px 5px 30px;
		font-size: 22px;
		cursor: pointer;
		margin-top: 20px;
		color: red;

	}
	.restart:hover{
		background: white;
	}
	a{
		text-decoration: none;
	}

</style>
<body>
	<span style="font-size: 28px;">Перемещаться на WASD</span>
	<span class="infotop g"></span>
	<span class="infoleft g" style="top: 50px;"></span>
	<span class="width" style="top: 200px;"></span>
	
	<div class="data">
		<div class="number">
			<span class="coins">0</span>
			<img src="coin.jpg" width="50px" height="50px" style="margin-left: 10px;">
		</div>
		<div class="time"></div>
	</div>
	<div class="field">
		<img src="coin.jpg" id="c1" class="q" width="20px" height="20px">
		<img src="coin.jpg" id="c2" class="q" width="20px" height="20px">
		<img src="coin.jpg" id="c3" class="q" width="20px" height="20px">
		<img src="coin.jpg" id="c4" class="q" width="20px" height="20px">
		<div class="element">&#9827;</div>
	</div>
	<div class="control">
		<div class="button" id="left">Влево</div>
		<div class="button" id="right">Вправо</div>
		<div class="button" id="top" >Вверх</div>
		<div class="button" id="bottom">Вниз</div>
	</div>
	<div class="win">
		<div class="text"></div>
		<a href="rofl.html"><div class="restart">Restart</div></a>
	</div>
	<script>
		let w = $('.field').outerWidth() - 20;
		let i = 0;
		let a = 0;
		let b = 0;
		let c = 0;
		let gh = false;
		
		function topper(){
			 i = i + 1;
			$('.element').css('bottom',i + "px");
			gh = true;
			if (i == 335){
				clearInterval(topp);
			};	
		}
		function botter(){
			 i = i - 1;
			$('.element').css('bottom',i + "px");
			gh = true;
			if (i == -335){
				clearInterval(bott);
			};	
		}
		function lefter(){
			 b = b - 1;
			$('.element').css('left',b + "px");
			gh = true;
			if (b == -790){
				clearInterval(leftt);
			};	
		}
		function righter(){
			 b = b + 1;
			$('.element').css('left',b + "px");
			gh = true;
			if (b == 790){
				clearInterval(rightt);
			};	
		}

	
		$(document).on('keydown',function (e) {
			let keyid;
			if (e.which){
				keyid = e.which;
				
			};
			 if (keyid == 87 && gh == false && $('.element').offset().top > 100){
			 	topp =  setInterval(topper , 5);
			 	$('#top').css('background','red');
			};
			
		
			 });


		$(document).on('keyup',function (e) {
			let keyid;
			if (e.which){
				keyid = e.which;
				
			};
			 if (keyid == 87){
			 	clearInterval(topp);
			 	$('#top').css('background','black');
			 	gh = false;
			};
		});

		$(document).on('keydown',function (e) {
			let keyid;
			if (e.which){
				keyid = e.which;
				
			};
			 if (keyid == 83 && gh == false && $('.element').offset().top < 680){
			 	bott =  setInterval(botter , 5);
			 	$('#bottom').css('background','red');
			};
			
		
			 });


		$(document).on('keyup',function (e) {
			let keyid;
			if (e.which){
				keyid = e.which;
				
			};
			 if (keyid == 83){
			 	clearInterval(bott);
			 	$('#bottom').css('background','black');
			 	gh = false;
			};
		});

		$(document).on('keydown',function (e) {
			let keyid;
			if (e.which){
				keyid = e.which;
				
			};
			 if (keyid == 65 && gh == false && $('.element').offset().left > 100){
			 	leftt =  setInterval(lefter , 5);
			 	$('#left').css('background','red');
			};
			
		
			 });


		$(document).on('keyup',function (e) {
			let keyid;
			if (e.which){
				keyid = e.which;
				
			};
			 if (keyid == 65){
			 	clearInterval(leftt);
			 	$('#left').css('background','black');
			 	gh = false;
			};
		});

		$(document).on('keydown',function (e) {
			let keyid;
			if (e.which){
				keyid = e.which;
				
			};
			 if (keyid == 68 && gh == false && $('.element').offset().left < 1580){
			 	rightt =  setInterval(righter , 5);
			 	$('#right').css('background','red');
			};
			
		
			 });


		$(document).on('keyup',function (e) {
			let keyid;
			if (e.which){
				keyid = e.which;
				
			};
			 if (keyid == 68){
			 	clearInterval(rightt);
			 	$('#right').css('background','black');
			 	gh = false;
			};
		});

		


		/*
		$('#top').on('mousedown',function(){
			if ($('.element').offset().top > 100)
			topp =  setInterval(topper , 5);
		
		});
		$('#top').on('mouseup',function(){
			clearInterval(topp);
		});


		$('#bottom').on('mousedown',function(){
			if ($('.element').offset().top < 680)
			bott =  setInterval(botter , 5);
		});
		$('#bottom').on('mouseup',function(){
			clearInterval(bott);
		});


		$('#left').on('mousedown',function(){
			if ($('.element').offset().left > 20)
			leftt =  setInterval(lefter , 5);
		});
		$('#left').on('mouseup',function(){
			clearInterval(leftt);
		});


		$('#right').on('mousedown',function(){
			if ($('.element').offset().left < w)
			rightyt =  setInterval(righter ,5);
		});
		$('#right').on('mouseup',function(){
			clearInterval(rightyt);
		});
		*/
		function infoElement() {
			$('.infotop').text($('.element').offset().top);
			$('.infoleft').text($('.element').offset().left);
		}
		setInterval(infoElement,1);
	



		$(document ).ready(function(){
		


		let x1 =	Math.floor(Math.random() * (w - 10) + 10);
		let y1 =	Math.floor(Math.random() * (600 - 110) + 110);

		let x2 =	Math.floor(Math.random() * (w - 10) + 10);
		let y2 =	Math.floor(Math.random() * (600 - 110) + 100);

		let x3 =	Math.floor(Math.random() * (w - 10) + 10);
		let y3 =	Math.floor(Math.random() * (600 - 110) + 110);

		let x4 =	Math.floor(Math.random() * (w - 10) + 10);
		let y4 =	Math.floor(Math.random() * (600 - 110) + 110);

		$('#c1').css('top',y1);
		$('#c1').css('left',x1);

		$('#c2').css('top',y2);
		$('#c2').css('left',x2);
		
		$('#c3').css('top',y3);
		$('#c3').css('left',x3);
		
		$('#c4').css('top',y4);
		$('#c4').css('left',x4);


function infoc1() {
			$('.infoc1top').text($('#c1').offset().top);
			$('.infoc1left').text($('#c1').offset().left);
		};
setInterval(infoc1,500);

		let t = 30;
		$('.time').text('0:' + t);
		function timer(){
		t = t-1;
		$('.time').text('0:' + t);
		if (t == 0){
			clearInterval(timeset);
			time = true;

		}
		};

		timeset = setInterval(timer,1000);

		coins = 0;
		

		function check(){

		if($('#c1').css ('display') == 'flex' &&  Math.abs($('#c1').offset().top - $('.element').offset().top) < 15 && Math.abs($('#c1').offset().left - $('.element').offset().left) < 15){
			$('#c1').css ('display','none');
			coins++;
		};

		if($('#c2').css ('display') == 'flex' &&  Math.abs($('#c2').offset().top - $('.element').offset().top) < 15 && Math.abs($('#c2').offset().left - $('.element').offset().left) < 15){
			$('#c2').css ('display','none');
			coins++;
		};

		if($('#c3').css ('display') == 'flex' &&  Math.abs($('#c3').offset().top - $('.element').offset().top) < 15 && Math.abs($('#c3').offset().left - $('.element').offset().left) < 15){
			$('#c3').css ('display','none');
			coins++;
		};

		if($('#c4').css ('display') == 'flex' &&  Math.abs($('#c4').offset().top - $('.element').offset().top) < 15 && Math.abs($('#c4').offset().left - $('.element').offset().left) < 15){
			$('#c4').css ('display','none');
			coins++;

			
		};
		$('.coins').text(coins);
		};
		setInterval(check,5);
		});
		function checkWin() {
			if ($('.coins').text() == '4' ){
				$('.win').css('display','flex');
				$('.text').css('color','green');
				$('.text').text('CONGRATULATIONS');		
		}
		if ($('.coins').text() != '4' && $('.time').text() == '0:0'){
			$('.win').css('display','flex');
				$('.text').css('color','red');
				$('.text').text('GAME OVER');
		};
		};
		setInterval(checkWin,10);
	</script>
</body>
</html>
